#CURRENT MODEL FOR CASSANDRA
#Spaced out for visualization:





CREATE TABLE BATCHWEEKLYREPORT (
	BATCH_ID UUID,
	BATCH_NAME TEXT,
	QC_COUNT_GREEN INT,
	QC_COUNT_YELLOW INT,
	QC_COUNT_RED INT,
	QC_SCORE INT,
	SURVEY_COUNT_GREEN INT,
	SURVEY_COUNT_YELLOW INT,
	SURVEY_COUNT_RED INT,
	SURVEY_SCORE INT,
	TRAINER TEXT,
	ASSOCIATE_IDS SET<UUID>,
	LOCATION TEXT,
	SKILLTYPE TEXT,
	END_DATE TIMESTAMP,
	WEEKS INT,
	CURRENT_WEEK INT,
	CATEGORY_NAME TEXT,
	REPORT_TIME TIMESTAMP,
	PRIMARY KEY (BATCH_ID, REPORT_TIME)
) WITH CLUSTERING ORDER BY (REPORT_TIME DESC);



CREATE TABLE ASSOCIATEWEEKLYREPORT (
    ASSOCIATE_EMAIL TEXT,
    ASSOCIATE_NAME TEXT, 
    ASSOCIATE_ID UUID,
    BATCH_ID UUID,
    TRAINING_STATUS TEXT,
    QC_SCORE INT,
    QC_COUNT_REDWEEKS INT,
    CURRENT_WEEK INT,
    SKILLTYPE TEXT 
    PHONE_NUMBER TEXT,
    PROFILE_URL TEXT,
    FLAG_STATUS TEXT,
    REPORT_TIME TIMESTAMP,
    PRIMARY KEY (ASSOCAITE_ID, REPORT_TIME)
) WITH CLUSTERING ORDER BY (REPORT_TIME DESC);



CREATE TABLE REDREPORT (
    ASSOCIATE_IDS SET<UUID>,
    BATCH_IDS SET<UUID>,
    REPORT_TIME TIMESTAMP,
    PRIMARY KEY (REPORT_TIME)
) WITH CLUSTERING ORDER BY (REPORT_TIME DESC);





#Actual Commands are as follows:

Create keyspace caliber with replication={'class':'SimpleStrategy','replication_factor':1};
Create keyspace calibertest with replication={'class':'SimpleStrategy','replication_factor':1};

USE caliber;



#Table Creation:

CREATE TABLE BATCHWEEKLYREPORT ( BATCH_ID UUID, BATCH_NAME TEXT, QC_COUNT_GREEN INT, QC_COUNT_YELLOW INT, QC_COUNT_RED INT, QC_SCORE INT, SURVEY_COUNT_GREEN INT, SURVEY_COUNT_YELLOW INT, SURVEY_COUNT_RED INT, SURVEY_SCORE INT, TRAINER TEXT, ASSOCIATE_IDS SET<UUID>, LOCATION TEXT, SKILLTYPE TEXT, END_DATE TIMESTAMP, WEEKS INT, CURRENT_WEEK INT, CATEGORY_NAME TEXT, REPORT_TIME TIMESTAMP, PRIMARY KEY (BATCH_ID, REPORT_TIME) ) WITH CLUSTERING ORDER BY (REPORT_TIME DESC);

CREATE TABLE ASSOCIATEWEEKLYREPORT (ASSOCIATE_EMAIL TEXT, ASSOCIATE_NAME TEXT, ASSOCIATE_ID UUID, BATCH_ID UUID, TRAINING_STATUS TEXT, QC_SCORE INT, QC_COUNT_REDWEEKS INT, CURRENT_WEEK INT, SKILLTYPE TEXT, PHONE_NUMBER TEXT, PROFILE_URL TEXT, FLAG_STATUS TEXT, REPORT_TIME TIMESTAMP, PRIMARY KEY (ASSOCIATE_ID, REPORT_TIME) ) WITH CLUSTERING ORDER BY (REPORT_TIME DESC);

CREATE TABLE REDREPORT (ASSOCIATE_IDS SET<UUID>, BATCH_IDS SET<UUID>, REPORT_TIME TIMESTAMP, PRIMARY KEY (REPORT_TIME) );



#Data Insert for BATCHWEEKLYREPORT:

INSERT INTO batchweeklyreport (BATCH_ID, BATCH_NAME, QC_COUNT_GREEN, QC_COUNT_YELLOW, QC_COUNT_RED, QC_SCORE, SURVEY_COUNT_GREEN, SURVEY_COUNT_YELLOW, 
SURVEY_COUNT_RED, SURVEY_SCORE, TRAINER, ASSOCIATE_IDS, LOCATION, SKILLTYPE, END_DATE, WEEKS, CURRENT_WEEK, CATEGORY_NAME, REPORT_TIME) VALUES (
cbc08968-97ba-4cb3-9f91-ab707d8ef90a,'ArlingtonJava',10,10,10,50,30,0,0,100,'Joseph', {d577759f-0b49-447a-9fff-0b287fc354d5,f4241311-3106-44d7-8811-d2f66a57e1a1,712cc13a-ecf9-47e9-8b26-908df1ea5c29}, 'Arlington','Java', '2018-09-14',10,5,'Devops', toTimestamp(now())) IF NOT EXISTS;



#Data Insert for ASSOCIATEWEEKLYREPORT:

INSERT INTO associateweeklyreport (ASSOCIATE_EMAIL, ASSOCIATE_NAME, ASSOCIATE_ID, BATCH_ID, TRAINING_STATUS, QC_SCORE, QC_COUNT_REDWEEKS, CURRENT_WEEK, SKILLTYPE, PHONE_NUMBER, PROFILE_URL, FLAG_STATUS, REPORT_TIME) VALUES ('person@gmail.com','person worksalot', d577759f-0b49-447a-9fff-0b287fc354d5, cbc08968-97ba-4cb3-9f91-ab707d8ef90a,'Active',60,3,6,'Java','123-456-7890','personalprofile@stuff.net','None', toTimestamp(now())) IF NOT EXISTS;



#Data Insert for REDREPORT:

INSERT INTO redreport (ASSOCIATE_IDS, BATCH_IDS, REPORT_TIME) VALUES ({d577759f-0b49-447a-9fff-0b287fc354d5},{cbc08968-97ba-4cb3-9f91-ab707d8ef90a}, toTimestamp(now())) IF NOT EXISTS;